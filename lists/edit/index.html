<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Auth</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Stack+Sans+Text&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="style.css">
        
    </head>
    <body>
        <h1 id="title">PreseList</h1>
        <h2 id="title">List Editor</h2>
        <label>Email</label><br>
        <input id="email" placeholder="Email Adress" type="email"><br>
        <label>Password</label><br>
        <input id="password" placeholder="Enter Password" type="password"><br>
        <button class="button" id="signup">Sign Up</button>
        <button id="login">Log In</button><br>
        <p id="status" class="button"></p>

        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
            import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
            import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries

            // Your web app's Firebase configuration
            const firebaseConfig = {
                apiKey: "AIzaSyBjIkrKxji4sEjPqnmk1wS2t23J9Wd1wCU",
                authDomain: "prese-list.firebaseapp.com",
                projectId: "prese-list",
                storageBucket: "prese-list.firebasestorage.app",
                messagingSenderId: "757973569629",
                appId: "1:757973569629:web:3eb533a501bc69d09bfdb4"
            };

            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const db = getFirestore(app);

            const emailEl = document.getElementById("email");
            const passEl = document.getElementById("password");
            const statusEl = document.getElementById("status");

            document.getElementById("resetPassword").onclick = async () => {
                const email = emailEl.value
                try {
                    await sendPasswordResetEmail(auth, email);
                    statusEl.textContent = "Password reset email sent!";
                } catch (err) {
                    statusEl.textContent = err.message;
                }
            };

            // Sign up
            document.getElementById("signup").onclick = async () => {
                await createUserWithEmailAndPassword(auth, emailEl.value, passEl.value);
                statusEl.textContent = "Account created! Please Sign In.";
            };

            // Log in
            document.getElementById("login").onclick = async () => {
                await signInWithEmailAndPassword(auth, emailEl.value, passEl.value);
                statusEl.textContent = "Logged in!";
                window.location.href = "../";
            };
        </script>
    </body>
</html>